<main id="product-show" class="group">

  <% if (product.escape("last_query")) { %>
    <header>
      <a href="/#search_results">
        <div id="back-arrow">
        </div>Back
        to search results for
        "<span><%= product.escape("last_query") %></span>"
      </a>
    </header>
  <% }; %>

  <div id="product">
    <ul id="picture-cell">
      <li id="picture">
        <img src="<%= product.escape("large_picture_url") %>" alt="product image"/>
      </li>
    </ul>

    <ul id="info-cell">
      <li id="name">
        <%= product.escape("name") %>
      </li>

      <li id="price-tables">
        <% var salePrice = (product.escape("sale_price") * 1).toFixed(2) %>
        <% if (product.escape("original_price")) { %>
          <% var originalPrice = (product.escape("original_price") * 1).toFixed(2) %>
          <% var amountSaved = (originalPrice - salePrice).toFixed(2) %>
          <% var percentSaved = (100 / (salePrice / amountSaved)).toFixed(0) %>
          <ul class="prices">
            <li class="price-type">
              List Price:
            </li>

            <li id="original-price">
              $<%= originalPrice %>
            </li>
          </ul>
        <% }; %>

        <ul id="price" class="prices">
          <li class="price-type">
            Price:
          </li>

          <li id="sale-price" class="red-prices">
            $<%= salePrice %>
          </li>
        </ul>

        <ul class="prices">
          <% if (percentSaved) { %>
            <li class="price-type">
              You save:
            </li>

            <li class="red-prices">
              $<%= amountSaved %>
              (<%= percentSaved %>%)
            </li>
          <% }; %>
        </ul>
      </li>


      <% var quantity = product.escape("quantity") %>
      <% if (quantity < 1) { %>
          <li id="out-of-stock">
            Out of Stock
          </li>
      <% } else if (quantity > 25) { %>
          <li id="in-stock">
            In Stock
          </li>
      <% } else { %>
          <li id="left-in-stock">
            <%= quantity %> left in stock.
          </li>
      <% }; %>

      <li id="seller-name">
        Sold by <%= product.escape("seller_name") %>
      </li>
    </ul>

    <ul id="add-to-cart-cell">
      <li>
        <a href="/api/cart_products/add/<%= product.id %>" data-method="post">
            Add to Cart
        </a>
      </li>
    </ul>
  </div>

  <div id="description">
    <ul>
      <% if (product.escape("description")) { %>
          <li>
            <div id="description-title">
              Product Description:
            </div>

            <span id="description-text">
              <%= product.escape("description") %>
            </span>
          </li>
      <% } else { %>
          <li>
            <div id="description-title">
              Product Description:
            </div>

            <span id="description-text">
              No specific description was given by the seller.
            </span>
          </li>
      <% }; %>
    </ul>
  </div>
</main>
